<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="https://use.typekit.net/rra8ojn.css">
  <link rel="stylesheet" href="css/style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="decision-body">

  <div>
    <a href="index.html">
    <button class="zruegg-button">ZRÜGG</button>
    </a>
  </div>

  <div class="decision-wrapper">
  
  <h2 class="titelentscheid">mir bruche die zwei agabe für es personalisierts ergebnis!</h2>

  <div class="entscheidungscontainer">

   <!--ort-->
   <div class="select">
    <label for="orte" class="wohere">wo wetsch id aare?</label>
    <select id="orte">
      
      
      <option value="" disabled selected> uswau vom ort </option>
      
      
    </select>
  </div>

    <!--stufe-->
    <div>
      <p class="stufe">wie stufisch di ih?</p>
      <div class="gfroerlistufen">
        <button class="auswahlbutton"  data-value="gfroerli">gfrörli</button>
        <button class="auswahlbutton"  data-value="solala">so lala</button>
        <button class="auswahlbutton"  data-value="hertimnae">hert im nä</button>
      </div>
    </div>

  </div>

  <p>
    <div class="findsuse">
      <button id="findsuse-btn" class="findsuse-button" type="button">FINDS USE!</button>
    </div>
    
  </p>

  </div>

  <canvas id="myAareChart"></canvas>


  <!-- <script src="js/orte.js"></script> -->

  <!-- <script>
    const API_URL = 'https://im3hs25.jannastutz.ch/php/unload.php';
    
    const $select = document.getElementById('orte');
    const $goBtn  = document.querySelector('.findsuse-button');
    const stufeBtns = Array.from(document.querySelectorAll('.auswahlbutton'));
    let selectedStufe = '';
    
    // 1) fill dropdown from API
    fetch(API_URL, { cache: 'no-store' })
      .then(r => r.json())
      .then(rows => {
        const orte = [...new Set(rows.map(r => r.orte))].sort((a,b)=>a.localeCompare(b,'de'));
        $select.innerHTML = '<option value="" disabled selected> uswau vom ort </option>';
        orte.forEach(o => {
          const opt = document.createElement('option');
          opt.value = opt.textContent = o;
          $select.appendChild(opt);
        });
      })
      .catch(e => console.error('Fehler beim Laden der Orte:', e));
    
    // 2) stufe selection (toggle UI state)
    stufeBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        selectedStufe = btn.dataset.value || '';
        stufeBtns.forEach(b => b.classList.toggle('active', b === btn));
      });
    });
    
    // 3) redirect with query params
    $goBtn.addEventListener('click', (e) => {
      e.preventDefault(); // avoid navigating via <a> wrapper
      const ort = $select.value;
      if (!ort) { alert('Bitte Ort auswählen'); return; }
      const qs = new URLSearchParams({ ort, stufe: selectedStufe }).toString();
      window.location.href = `result.html?${qs}`;
    });
    
    // make the whole button act, not the nested <a>
    document.querySelector('.findsuse a')?.addEventListener('click', ev => ev.preventDefault());
    </script> -->
    
    <!-- decision.html (add this right before </body>) -->
<script src="js/dropdown.js"></script>
<script src="js/decision.js"></script>


</body>

</html>