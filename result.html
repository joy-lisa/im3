<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://use.typekit.net/rra8ojn.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="result-body">
    <!--zurück button-->
    <div>
    <a href="index.html">
    <button class="zruegg-button">ZRÜGG</button>
    </a>
    </div>

    <!--text-->
    <div>
    <h2 class="subtitle-result">di jetzigi temperatur</h2>
    </div>

    <!--temperatur-->
    <div>
    <h1 class="temperatur">hier die aktuelle temperatur mit js</h1>
    </div>

    <!--beschreibung-->
    <div>
      <p id="ausgabe-stufe"></p>
      <p id="ausgabe-ort"></p>  
    </div>
  

    <!--spruch-->
    <div>
        <h2 class="spruch">"iglu boue bringts meh"</h2>
    </div>

    <footer class="result-footer">
    <div class="footer">
        <p class="footer-titel">die letzte täg beobachte:</p>
    </div>

    <div class="footer-daten">
        <button class="ergebnis-button">
            <a href="daten.html" class="footer-button">20°</a>
        </button>

        <button class="ergebnis-button">
            <a href="daten.html" class="footer-button">21°</a>
        </button>

        <button class="ergebnis-button">
            <a href="daten.html" class="footer-button">19°</a>
        </button>

        <button class="ergebnis-button">
            <a href="daten.html" class="footer-button">22°</a>
        </button>
    </div>

    </footer>

    <!-- <script>
        const API_URL = 'https://im3hs25.jannastutz.ch/php/unload.php';
        
        // helpers
        function tsToUnix(tsStr) {
          // your API returns "YYYY-MM-DD HH:MM:SS" as local time; treat as UTC to be consistent
          const iso = tsStr.replace(' ', 'T') + 'Z';
          return Math.floor(new Date(iso).getTime() / 1000);
        }
        
        function pickSpruch(temp, stufe) {
          if (!Number.isFinite(temp)) return 'hüt wüsse mers nöd so rächt';
          if (temp < 10)  return 'iglu boue bringts meh';
          if (temp < 14)  return stufe === 'hertimnae' ? 'chli frisch, aber machbar' : 'bibelihaut vibes';
          if (temp < 18)  return 'wär seisch – ab i d Aare!';
          return 'summerfeeling pur';
        }
        
        (async function init() {
          const params = new URLSearchParams(location.search);
          const ort   = params.get('ort');
          const stufe = params.get('stufe') || '';
        
          const $tempEl   = document.querySelector('h1.temperatur');
          const $descEl   = document.querySelector('h3');      // “d uswau vom ort + gfroerlistufe”
          const $spruchEl = document.querySelector('h2.spruch');
        
          if (!ort) {
            $tempEl.textContent = 'Kein Ort gewählt';
            $descEl.textContent = 'bitte zrügg und Ort uswähle';
            return;
          }
        
          try {
            const rows = await fetch(API_URL, { cache: 'no-store' }).then(r => r.json());
        
            // filter & parse
            const parsed = rows
              .filter(r => r.orte === ort)
              .map(r => ({ ort: r.orte, temp: Number(r.aare_temp), ts: tsToUnix(r.timestamp) }))
              .filter(r => Number.isFinite(r.temp) && Number.isFinite(r.ts));
        
            if (!parsed.length) {
              $tempEl.textContent = `keini aktuelle Date für ${ort}`;
              $descEl.textContent = `${ort}${stufe ? ' · stufe: ' + stufe : ''}`;
              return;
            }
        
            // pick the latest by timestamp
            const latest = parsed.reduce((a, b) => (a.ts > b.ts ? a : b));
        
            $tempEl.textContent = `${latest.temp.toFixed(1)}°C`;
            $descEl.textContent = `${ort}${stufe ? ' · stufe: ' + stufe : ''}`;
            $spruchEl.textContent = pickSpruch(latest.temp, stufe);
        
            // optional: console for debugging
            console.log('Latest row for', ort, latest);
        
          } catch (err) {
            console.error(err);
            $tempEl.textContent = 'Fehler bim Lade';
          }
        })();
        </script> -->
        
<!-- result.html (add this right before </body>) -->
<script src="js/result.js"></script>
<script src="js/dropdown.js"></script>
    
</body>
</html>